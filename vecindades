import streamlit as st

st.title("Comparador de Patentes entre PÃ³rticos")

st.markdown("### Pega las patentes por pÃ³rtico (una por lÃ­nea):")

# Crear campos para cada pÃ³rtico
porticos = {}
num_porticos = st.number_input("Â¿CuÃ¡ntos pÃ³rticos deseas analizar?", min_value=2, max_value=20, value=3)

for i in range(1, num_porticos + 1):
    data = st.text_area(f"PÃ³rtico {i}", height=150)
    patentes = set(line.strip() for line in data.splitlines() if line.strip())
    porticos[f"Portico {i}"] = patentes

if st.button("Analizar"):
    st.markdown("## Patentes Ãºnicas por pÃ³rtico:")
    for portico, patentes in porticos.items():
        otras_patentes = set.union(*(v for k, v in porticos.items() if k != portico))
        unicas = patentes - otras_patentes
        st.write(f"ðŸ”¹ {portico}: {unicas if unicas else 'Ninguna'}")

    st.markdown("## Patentes frecuentes:")
    from collections import Counter
    contador = Counter()
    for pats in porticos.values():
        for pat in pats:
            contador[pat] += 1
    umbral = st.slider("Aparece en al menos cuÃ¡ntos pÃ³rticos:", 1, num_porticos, 2)
    frecuentes = [p for p, c in contador.items() if c >= umbral]
    st.write(f"âœ… Patentes que aparecen en al menos {umbral} pÃ³rticos:", frecuentes if frecuentes else "Ninguna")
